<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACIU S4 - ê¸°ë³¸í•™ìŠµ</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- í—¤ë” -->
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-blue-600 mb-2">ACIU QUIZ</h1>
            <p class="text-gray-600">ë³´í—˜ì¤‘ê°œì‚¬ ìê²©ì¦ í•™ìŠµ ì‹œìŠ¤í…œ - Season 4</p>
            <div id="status" class="text-center text-blue-600 mb-4 font-semibold">ê¸°ë³¸í•™ìŠµ ëª¨ë“œ</div>
            <div id="category-info" class="text-center text-green-600 mb-2 font-medium hidden">
                <!-- ì¹´í…Œê³ ë¦¬ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
        </header>

        <!-- ê¸°ë³¸í•™ìŠµ í™”ë©´ -->
        <div id="basic-learning-screen" class="bg-white rounded-lg shadow-md p-8">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-semibold" id="learning-title">ê¸°ë³¸í•™ìŠµ</h2>
                
                <!-- í†µê³„ ì‹œìŠ¤í…œ í†µí•©ëœ í†µê³„ ë°•ìŠ¤ -->
                <div id="basic-progress-box" class="bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg border border-blue-200 min-w-[300px]">
                    <!-- ì¹´í…Œê³ ë¦¬ ì •ë³´ (ì¹´í…Œê³ ë¦¬ ëª¨ë“œì¼ ë•Œë§Œ í‘œì‹œ) -->
                    <div id="category-progress-info" class="mb-2 hidden">
                        <span class="text-sm font-medium text-gray-700">ì¹´í…Œê³ ë¦¬:</span>
                        <span id="current-category" class="ml-2 text-sm font-bold text-orange-600">ë¡œë”© ì¤‘...</span>
                    </div>
                    <!-- ì§„í–‰ë¥  ì •ë³´ -->
                    <div class="mb-2">
                        <span class="text-sm font-medium text-gray-700">ì§„í–‰ë¥ :</span>
                        <span id="basic-progress-text" class="ml-2 text-sm font-bold text-blue-600">ë¡œë”© ì¤‘...</span>
                    </div>
                    <!-- ì •ë‹µë¥  ì •ë³´ -->
                    <div class="mb-2">
                        <span class="text-sm font-medium text-gray-700">ì •ë‹µë¥ :</span>
                        <span id="basic-accuracy-text" class="ml-2 text-sm font-bold text-green-600">ë¡œë”© ì¤‘...</span>
                    </div>
                    <!-- ì˜¤ëŠ˜ ì •ë‹µë¥  -->
                    <div>
                        <span class="text-sm font-medium text-gray-700">ì˜¤ëŠ˜ ì •ë‹µë¥ :</span>
                        <span id="basic-today-accuracy" class="ml-2 text-sm font-bold text-purple-600">ë¡œë”© ì¤‘...</span>
                    </div>
                </div>
                
                <button id="navigation-button" onclick="goToHome()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg">
                    í™ˆìœ¼ë¡œ
                </button>
            </div>
            
            <!-- ë‹¤ìŒ ë¬¸ì œ ì•ˆë‚´ ë°•ìŠ¤ -->
            <div id="next-question-box" class="mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                <h3 class="text-lg font-semibold text-yellow-800 mb-2">ğŸ“ ë‹¤ìŒ ë¬¸ì œ ì•ˆë‚´</h3>
                <p id="next-question-text" class="text-sm text-yellow-700">ë¡œë”© ì¤‘...</p>
            </div>
            
            <!-- í•™ìŠµ ë°©ì‹ ì„ íƒ -->
            <div class="mb-8" id="mode-selection">
                <h3 class="text-lg font-semibold mb-4">í•™ìŠµ ë°©ì‹ ì„ íƒ</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <button onclick="selectBasicLearningMode('continue')" class="bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-lg text-center transition-all">
                        <div class="text-2xl mb-2">ğŸ”„</div>
                        <div class="font-semibold">ì´ì–´í’€ê¸°</div>
                        <div class="text-sm opacity-90">ì´ì „ ì§„í–‰ìƒí™©ë¶€í„° ê³„ì†</div>
                    </button>
                    <button onclick="selectBasicLearningMode('restart')" class="bg-green-500 hover:bg-green-600 text-white p-4 rounded-lg text-center transition-all">
                        <div class="text-2xl mb-2">ğŸ”„</div>
                        <div class="font-semibold">ì²˜ìŒí’€ê¸°</div>
                        <div class="text-sm opacity-90">ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘</div>
                    </button>
                    <button onclick="selectBasicLearningMode('random')" class="bg-purple-500 hover:bg-purple-600 text-white p-4 rounded-lg text-center transition-all">
                        <div class="text-2xl mb-2">ğŸ²</div>
                        <div class="font-semibold">ëœë¤í’€ê¸°</div>
                        <div class="text-sm opacity-90">ë¬´ì‘ìœ„ ìˆœì„œë¡œ í•™ìŠµ</div>
                    </button>
                </div>
            </div>
            
            <!-- ë¬¸ì œ í‘œì‹œ ì˜ì—­ -->
            <div id="basic-question-area" class="hidden">
                <h2 class="text-2xl font-semibold mb-4">ë¬¸ì œ í’€ì´</h2>
                
                <!-- ë¬¸ì œ ì •ë³´ -->
                <div class="mb-4 p-4 bg-gray-50 rounded">
                    <div class="flex justify-between items-center mb-2">
                        <span id="question-type" class="text-sm text-blue-600 font-medium">ì§„ìœ„í˜•</span>
                        <span id="question-code" class="text-sm text-gray-600">Q001</span>
                    </div>
                    <div id="layer-info" class="text-sm text-gray-500 mb-2">ì¬ì‚°ë³´í—˜ > ì¼ë°˜ì¬ì‚°ë³´í—˜</div>
                    <div class="flex justify-between items-center mb-3">
                        <span class="text-sm text-gray-600">ì§„ë„</span>
                        <span id="progress-info" class="text-sm font-medium text-blue-600">1 / 789</span>
                    </div>
                    <div id="question-text" class="text-lg font-medium bg-red-100 p-4 rounded border-2 border-red-300">
                        ë¬¸ì œ í…ìŠ¤íŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
                    </div>
                </div>

                <!-- ë‹µì•ˆ ë²„íŠ¼ ì˜ì—­ -->
                <div id="answer-buttons" class="mb-4">
                    <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë  ë‹µì•ˆ ë²„íŠ¼ë“¤ -->
                </div>

                <!-- ì •ë‹µ í‘œì‹œ -->
                <div id="correct-answer" class="hidden p-4 bg-green-100 rounded border border-green-300">
                    <h3 class="font-semibold text-green-800">ì •ë‹µ:</h3>
                    <p id="correct-answer-text" class="text-green-700"></p>
                </div>

                <!-- ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ -->
                <div class="flex justify-between mt-4">
                    <button onclick="previousQuestion()" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg">
                        ì´ì „ë¬¸ì œ
                    </button>
                    <button onclick="checkAnswer()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg">
                        ì •ë‹µ í™•ì¸
                    </button>
                    <button onclick="nextQuestion()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg">
                        ë‹¤ìŒ ë¬¸ì œ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ë‹¨ìˆœí™”ëœ JavaScriptë§Œ ë¡œë“œ -->
    <script src="/static/js/basic_learning_main.js"></script>
    
    <!-- ì¤‘ì•™ ë°ì´í„° ê´€ë¦¬ ì‹œìŠ¤í…œ -->
    <script src="/static/js/central_data_manager.js"></script>
    <script src="/static/js/compatibility_layer.js"></script>
    <script src="/static/js/quiz_data_collector.js"></script>
    <script src="/static/js/realtime_sync_manager.js"></script>
    
    <!-- ë©”ë‰´ ê´€ë ¨ í•¨ìˆ˜ë“¤ -->
    <script>
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            console.log('=== ê¸°ë³¸í•™ìŠµ í˜ì´ì§€ ë¡œë“œ ===');
            
            // ì¤‘ì•™ ë°ì´í„° ê´€ë¦¬ ì‹œìŠ¤í…œ ì´ˆê¸°í™” í™•ì¸
            initializeCentralDataSystem();
            
            // ì¹´í…Œê³ ë¦¬ ì •ë³´ í™•ì¸ ë° ì œëª© ì—…ë°ì´íŠ¸
            updateLearningTitle();
            
            // ë ˆì´ì–´ë³„ ì¡°ê±´ë¶€ ë²„íŠ¼ ì—…ë°ì´íŠ¸
            updateNavigationButton();
            
            // URL íŒŒë¼ë¯¸í„° í™•ì¸ (ì´ì–´í’€ê¸°)
            const urlParams = new URLSearchParams(window.location.search);
            const continueMode = urlParams.get('continue');
            const questionIndex = urlParams.get('question');
            
            if (continueMode === 'true' && questionIndex !== null) {
                console.log(`âœ… ì´ì–´í’€ê¸° ëª¨ë“œ: ${parseInt(questionIndex) + 1}ë²ˆ ë¬¸ì œë¶€í„° ì‹œì‘`);
                // ì´ì–´í’€ê¸° ëª¨ë“œë¡œ ë°”ë¡œ ì‹œì‘
                startContinueMode(parseInt(questionIndex));
            } else {
                // ê¸°ë³¸í•™ìŠµ ìë™ ì‹œì‘ (ì´ì „ë¬¸ì œ ì´ì–´í’€ê¸°)
                autoStartBasicLearning();
            }
        });

        // ê¸°ë³¸í•™ìŠµ ìë™ ì‹œì‘ í•¨ìˆ˜
        function autoStartBasicLearning() {
            console.log('ğŸ”„ ê¸°ë³¸í•™ìŠµ ìë™ ì‹œì‘ (ì´ì „ë¬¸ì œ ì´ì–´í’€ê¸°)');
            
            // ì¤‘ì•™ ë°ì´í„°ì—ì„œ ì´ì „ í•™ìŠµ ìƒíƒœ í™•ì¸
            const lastLearningState = getLastLearningState();
            
            if (lastLearningState && lastLearningState.lastQuestionIndex > 0) {
                console.log(`âœ… ì´ì „ í•™ìŠµ ìƒíƒœ ë°œê²¬: ${lastLearningState.lastQuestionIndex + 1}ë²ˆ ë¬¸ì œë¶€í„° ì´ì–´í’€ê¸°`);
                startContinueMode(lastLearningState.lastQuestionIndex);
            } else {
                console.log('ğŸ”„ ì²˜ìŒ ì‹œì‘í•˜ëŠ” ê²½ìš°, 1ë²ˆ ë¬¸ì œë¶€í„° ì‹œì‘');
                // ë°”ë¡œ ë¬¸ì œ ë¡œë”© ì‹œì‘
                startContinueMode(0);
            }
        }

        // ì´ì „ í•™ìŠµ ìƒíƒœ ê°€ì ¸ì˜¤ê¸°
        function getLastLearningState() {
            try {
                const realTimeData = JSON.parse(localStorage.getItem('aicu_real_time_data') || '{}');
                const currentCategory = localStorage.getItem('aicu_current_category') || '06ì¬ì‚°ë³´í—˜';
                
                // ê¸°ë³¸í•™ìŠµ ê´€ë ¨ ë°ì´í„° í™•ì¸
                const basicLearningData = realTimeData['basic_learning'] || {};
                
                return {
                    category: currentCategory,
                    lastQuestionIndex: basicLearningData.lastQuestionIndex || 0,
                    totalSolved: basicLearningData.solved || 0,
                    totalCorrect: basicLearningData.correct || 0
                };
            } catch (error) {
                console.error('âŒ ì´ì „ í•™ìŠµ ìƒíƒœ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:', error);
                return null;
            }
        }

        // ì¤‘ì•™ ë°ì´í„° ê´€ë¦¬ ì‹œìŠ¤í…œ ì´ˆê¸°í™”
        function initializeCentralDataSystem() {
            console.log('=== ì¤‘ì•™ ë°ì´í„° ê´€ë¦¬ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ===');
            
            // ì¤‘ì•™ ë°ì´í„° ê´€ë¦¬ì í™•ì¸
            if (window.CentralDataManager) {
                console.log('âœ… CentralDataManager í™•ì¸ë¨');
            } else {
                console.warn('âš ï¸ CentralDataManagerë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }
            
            // í˜¸í™˜ì„± ë ˆì´ì–´ í™•ì¸
            if (window.CompatibilityLayer) {
                console.log('âœ… CompatibilityLayer í™•ì¸ë¨');
            } else {
                console.warn('âš ï¸ CompatibilityLayerë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }
            
            // ë¬¸ì œ í’€ì´ ë°ì´í„° ìˆ˜ì§‘ê¸° í™•ì¸
            if (window.QuizDataCollector) {
                console.log('âœ… QuizDataCollector í™•ì¸ë¨');
            } else {
                console.warn('âš ï¸ QuizDataCollectorë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }
            
            // ì‹¤ì‹œê°„ ë™ê¸°í™” ë§¤ë‹ˆì € í™•ì¸
            if (window.RealtimeSyncManager) {
                console.log('âœ… RealtimeSyncManager í™•ì¸ë¨');
            } else {
                console.warn('âš ï¸ RealtimeSyncManagerë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }
            
            console.log('âœ… ì¤‘ì•™ ë°ì´í„° ê´€ë¦¬ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ');
        }

        // í•™ìŠµ ì œëª© ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateLearningTitle() {
            const urlParams = new URLSearchParams(window.location.search);
            const category = urlParams.get('category');
            
            if (category) {
                const categoryNames = {
                    '06ì¬ì‚°ë³´í—˜': 'ì¬ì‚°ë³´í—˜',
                    '07íŠ¹ì¢…ë³´í—˜': 'íŠ¹ì¢…ë³´í—˜',
                    '08ë°°ìƒì±…ì„ë³´í—˜': 'ë°°ìƒì±…ì„ë³´í—˜',
                    '09í•´ìƒë³´í—˜': 'í•´ìƒë³´í—˜'
                };
                
                const categoryName = categoryNames[category] || category;
                const learningTitle = document.getElementById('learning-title');
                
                if (learningTitle) {
                    learningTitle.textContent = `ëŒ€ë¶„ë¥˜í•™ìŠµ : ${categoryName}`;
                    console.log(`ğŸ“ í•™ìŠµ ì œëª© ì—…ë°ì´íŠ¸: ëŒ€ë¶„ë¥˜í•™ìŠµ : ${categoryName}`);
                }
            }
        }

        // ì´ì–´í’€ê¸° ëª¨ë“œ ì‹œì‘
        function startContinueMode(startIndex) {
            console.log(`ğŸ”„ ì´ì–´í’€ê¸° ì‹œì‘: ${startIndex + 1}ë²ˆ ë¬¸ì œë¶€í„°`);
            
            // ë©”ë‰´ ìˆ¨ê¸°ê³  ë¬¸ì œ ì˜ì—­ í‘œì‹œ
            document.getElementById('mode-selection').classList.add('hidden');
            document.getElementById('basic-question-area').classList.remove('hidden');
            
            // ë ˆì´ì–´ë³„ ì¡°ê±´ë¶€ ë²„íŠ¼ ì—…ë°ì´íŠ¸
            updateNavigationButton();
            
            // ë¬¸ì œ ë¡œë”© ë° í‘œì‹œ
            if (typeof displayQuestion === 'function') {
                // ì „ì—­ ë³€ìˆ˜ ì—…ë°ì´íŠ¸
                if (typeof window.currentQuestionIndex !== 'undefined') {
                    window.currentQuestionIndex = startIndex;
                }
                displayQuestion(startIndex);
            }
        }

        // ê¸°ë³¸í•™ìŠµ ì´ˆê¸°í™”
        function initializeBasicLearning() {
            console.log('ğŸ¯ ê¸°ë³¸í•™ìŠµ ì´ˆê¸°í™”');
            // ê¸°ì¡´ ì´ˆê¸°í™” ë¡œì§ (í•„ìš”ì‹œ ì¶”ê°€)
        }

        // ì´ì „ë¬¸ì œë¡œ ì´ë™
        function previousQuestion() {
            console.log('â¬…ï¸ ì´ì „ë¬¸ì œë¡œ ì´ë™');
            if (typeof window.previousQuestion === 'function') {
                window.previousQuestion();
            } else {
                console.log('âš ï¸ previousQuestion í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
            }
        }
        
        // í™ˆìœ¼ë¡œ ê°€ê¸°
        function goToHome() {
            window.location.href = '/home';
        }
        
        // ê¸°ë³¸í•™ìŠµ ë©”ë‰´ë¡œ ê°€ê¸°
        function goToBasicLearningMenu() {
            window.location.href = '/basic-learning';
        }
        
        // ëŒ€ë¶„ë¥˜ ë©”ë‰´ë¡œ ê°€ê¸°
        function goToLargeCategoryMenu() {
            window.location.href = '/large-category-learning';
        }
        
        // ë ˆì´ì–´ë³„ ì¡°ê±´ë¶€ ë²„íŠ¼ ì—…ë°ì´íŠ¸
        function updateNavigationButton() {
            const urlParams = new URLSearchParams(window.location.search);
            const category = urlParams.get('category');
            const isQuestionMode = !document.getElementById('basic-question-area').classList.contains('hidden');
            
            const button = document.getElementById('navigation-button');
            
            if (category) {
                // ëŒ€ë¶„ë¥˜í•™ìŠµ ëª¨ë“œ
                if (isQuestionMode) {
                    // ë ˆì´ì–´2/3 (ë¬¸ì œí’€ì´): ëŒ€ë¶„ë¥˜ë©”ë‰´ë¡œ
                    button.textContent = 'ëŒ€ë¶„ë¥˜ë©”ë‰´ë¡œ';
                    button.onclick = goToLargeCategoryMenu;
                    button.className = 'bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg';
                } else {
                    // ë ˆì´ì–´1 (ëŒ€ë¶„ë¥˜ ì´ˆê¸°): í™ˆìœ¼ë¡œ
                    button.textContent = 'í™ˆìœ¼ë¡œ';
                    button.onclick = goToHome;
                    button.className = 'bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg';
                }
            } else {
                // ê¸°ë³¸í•™ìŠµ ëª¨ë“œ - í•­ìƒ í™ˆìœ¼ë¡œ
                button.textContent = 'í™ˆìœ¼ë¡œ';
                button.onclick = goToHome;
                button.className = 'bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg';
            }
            
            console.log(`ğŸ”„ ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ ì—…ë°ì´íŠ¸: ${button.textContent} (${category ? 'ëŒ€ë¶„ë¥˜í•™ìŠµ' : 'ê¸°ë³¸í•™ìŠµ'} ${isQuestionMode ? 'ë ˆì´ì–´2/3' : 'ë ˆì´ì–´1'})`);
        }
        
        // ëª¨ë“œ ì„ íƒ í•¨ìˆ˜ë“¤
        function selectBasicLearningMode(mode) {
            console.log(`ğŸ¯ ê¸°ë³¸í•™ìŠµ ëª¨ë“œ ì„ íƒ: ${mode}`);
            
            // ë©”ë‰´ ìˆ¨ê¸°ê³  ë¬¸ì œ ì˜ì—­ í‘œì‹œ
            document.getElementById('mode-selection').classList.add('hidden');
            document.getElementById('basic-question-area').classList.remove('hidden');
            
            // ë ˆì´ì–´ë³„ ì¡°ê±´ë¶€ ë²„íŠ¼ ì—…ë°ì´íŠ¸
            updateNavigationButton();
            
            // ëª¨ë“œì— ë”°ë¥¸ ì‹œì‘ ì¸ë±ìŠ¤ ì„¤ì •
            let startIndex = 0;
            
            if (mode === 'continue') {
                // ì´ì–´í’€ê¸°: ì¤‘ì•™ ë°ì´í„°ì—ì„œ ì´ì „ í•™ìŠµ ìƒíƒœ í™•ì¸
                const lastLearningState = getLastLearningState();
                if (lastLearningState && lastLearningState.lastQuestionIndex > 0) {
                    startIndex = lastLearningState.lastQuestionIndex;
                    console.log(`ğŸ”„ ì´ì–´í’€ê¸°: ${startIndex + 1}ë²ˆ ë¬¸ì œë¶€í„° ì‹œì‘`);
                } else {
                    startIndex = 0;
                    console.log('ğŸ”„ ì´ì–´í’€ê¸°: ì§„í–‰ìƒí™© ì—†ìŒ, 1ë²ˆ ë¬¸ì œë¶€í„° ì‹œì‘');
                }
            } else if (mode === 'restart') {
                // ì²˜ìŒí’€ê¸°: 0ë²ˆ ë¬¸ì œë¶€í„° ì‹œì‘
                startIndex = 0;
                console.log('ğŸ”„ ì²˜ìŒí’€ê¸°: 1ë²ˆ ë¬¸ì œë¶€í„° ì‹œì‘');
            } else if (mode === 'random') {
                // ëœë¤í’€ê¸°: ë¬´ì‘ìœ„ ë¬¸ì œ ì„ íƒ
                startIndex = Math.floor(Math.random() * 789);
                console.log(`ğŸ² ëœë¤í’€ê¸°: ${startIndex + 1}ë²ˆ ë¬¸ì œë¶€í„° ì‹œì‘`);
            }
            
            // ë¬¸ì œ í’€ì´ ì‹œì‘ ì´ë²¤íŠ¸ ë°œìƒ
            triggerQuizStartEvent(startIndex, mode);
            
            // ë¬¸ì œ ë¡œë”© ë° í‘œì‹œ
            if (typeof displayQuestion === 'function') {
                // ì „ì—­ ë³€ìˆ˜ ì—…ë°ì´íŠ¸
                if (typeof window.currentQuestionIndex !== 'undefined') {
                    window.currentQuestionIndex = startIndex;
                }
                displayQuestion(startIndex);
            }
        }

        // ë¬¸ì œ í’€ì´ ì‹œì‘ ì´ë²¤íŠ¸ ë°œìƒ
        function triggerQuizStartEvent(questionIndex, mode) {
            console.log('=== ë¬¸ì œ í’€ì´ ì‹œì‘ ì´ë²¤íŠ¸ ë°œìƒ ===');
            
            const quizStartData = {
                questionId: `basic_${questionIndex}`,
                category: 'basic_learning',
                mode: mode,
                questionIndex: questionIndex,
                timestamp: new Date().toISOString(),
                pageUrl: window.location.href
            };
            
            // ë¬¸ì œ í’€ì´ ì‹œì‘ ì´ë²¤íŠ¸ ë°œìƒ
            const event = new CustomEvent('quizStarted', {
                detail: quizStartData
            });
            
            document.dispatchEvent(event);
            console.log('âœ… ë¬¸ì œ í’€ì´ ì‹œì‘ ì´ë²¤íŠ¸ ë°œìƒ ì™„ë£Œ:', quizStartData);
        }

        // ë¬¸ì œ í’€ì´ ì™„ë£Œ ë°ì´í„° ìˆ˜ì§‘ í•¨ìˆ˜
        function collectQuizCompletionData(questionId, isCorrect, userAnswer, correctAnswer) {
            console.log('=== ë¬¸ì œ í’€ì´ ì™„ë£Œ ë°ì´í„° ìˆ˜ì§‘ ===');
            
            const quizData = {
                questionId: questionId,
                category: 'basic_learning',
                isCorrect: isCorrect,
                userAnswer: userAnswer,
                correctAnswer: correctAnswer,
                timestamp: new Date().toISOString(),
                pageUrl: window.location.href
            };
            
            // ì¤‘ì•™ ë°ì´í„° ê´€ë¦¬ìë¡œ ì „ì†¡
            if (window.CentralDataManager && typeof window.CentralDataManager.recordQuizResult === 'function') {
                window.CentralDataManager.recordQuizResult(
                    quizData.questionId,
                    quizData.category,
                    quizData.isCorrect,
                    quizData.userAnswer,
                    quizData.correctAnswer
                );
                console.log('âœ… ë¬¸ì œ í’€ì´ ì™„ë£Œ ë°ì´í„° ì¤‘ì•™ ê´€ë¦¬ìë¡œ ì „ì†¡ ì™„ë£Œ');
            } else {
                console.warn('âš ï¸ CentralDataManagerë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }
            
            return quizData;
        }
    </script>
</body>
</html>