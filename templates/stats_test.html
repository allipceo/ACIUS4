<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í†µê³„ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ - ACIU S4</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- í—¤ë” -->
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-blue-600 mb-2">ğŸ§ª í†µê³„ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸</h1>
            <p class="text-gray-600">ë¶„ì‚°í˜• ë ˆê³ ë¸”ë¡ ê°œë°œ ë°©ë²•ë¡  - Day 3 í…ŒìŠ¤íŠ¸</p>
            <p class="text-sm text-blue-500 mt-2">í…ŒìŠ¤íŠ¸ í˜ì´ì§€ - í†µê³„ ê¸°ëŠ¥ ê²€ì¦</p>
        </header>

        <!-- í…ŒìŠ¤íŠ¸ ê²°ê³¼ í‘œì‹œ ì˜ì—­ -->
        <div class="bg-white rounded-lg shadow-md p-8 mb-8">
            <h2 class="text-2xl font-semibold mb-6">ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼</h2>
            
            <!-- ëª¨ë“ˆ ë¡œë“œ ìƒíƒœ -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                <div class="bg-blue-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-blue-800">ProgressManager</h3>
                    <p id="progress-manager-status" class="text-sm text-blue-600">ë¡œë”© ì¤‘...</p>
                </div>
                <div class="bg-green-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-green-800">StatsCalculator</h3>
                    <p id="stats-calculator-status" class="text-sm text-green-600">ë¡œë”© ì¤‘...</p>
                </div>
                <div class="bg-purple-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-purple-800">UIUpdater</h3>
                    <p id="ui-updater-status" class="text-sm text-purple-600">ë¡œë”© ì¤‘...</p>
                </div>
                <div class="bg-orange-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-orange-800">ProgressSystem</h3>
                    <p id="progress-system-status" class="text-sm text-orange-600">ë¡œë”© ì¤‘...</p>
                </div>
            </div>

            <!-- í†µê³„ ë°ì´í„° í‘œì‹œ -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <!-- ê¸°ë³¸í•™ìŠµ í†µê³„ -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold mb-3">ğŸ“š ê¸°ë³¸í•™ìŠµ í†µê³„</h3>
                    <div id="basic-stats" class="space-y-2 text-sm">
                        <p>ë¡œë”© ì¤‘...</p>
                    </div>
                </div>
                
                <!-- ì˜¤ëŠ˜ í†µê³„ -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold mb-3">ğŸ“… ì˜¤ëŠ˜ í†µê³„</h3>
                    <div id="today-stats" class="space-y-2 text-sm">
                        <p>ë¡œë”© ì¤‘...</p>
                    </div>
                </div>
            </div>

            <!-- í…ŒìŠ¤íŠ¸ ë²„íŠ¼ë“¤ -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <button onclick="testSaveProgress()" class="bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-lg">
                    ğŸ’¾ ì§„ë„ ì €ì¥ í…ŒìŠ¤íŠ¸
                </button>
                <button onclick="testGetNextQuestion()" class="bg-green-500 hover:bg-green-600 text-white p-3 rounded-lg">
                    ğŸ”„ ë‹¤ìŒ ë¬¸ì œ ì¡°íšŒ í…ŒìŠ¤íŠ¸
                </button>
                <button onclick="testUpdateStats()" class="bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-lg">
                    ğŸ“Š í†µê³„ ì—…ë°ì´íŠ¸ í…ŒìŠ¤íŠ¸
                </button>
            </div>

            <!-- ë¡œê·¸ ì¶œë ¥ ì˜ì—­ -->
            <div class="bg-black text-green-400 p-4 rounded-lg font-mono text-sm h-64 overflow-y-auto">
                <div id="test-log">í…ŒìŠ¤íŠ¸ ë¡œê·¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...</div>
            </div>
        </div>

        <!-- ì´ì–´í’€ê¸° í…ŒìŠ¤íŠ¸ ì˜ì—­ -->
        <div class="bg-white rounded-lg shadow-md p-8 mb-8">
            <h2 class="text-2xl font-semibold mb-6">ğŸ”„ ì´ì–´í’€ê¸° í…ŒìŠ¤íŠ¸</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- ê¸°ë³¸í•™ìŠµ ì´ì–´í’€ê¸° -->
                <div class="bg-blue-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-blue-800 mb-3">ğŸ“š ê¸°ë³¸í•™ìŠµ ì´ì–´í’€ê¸°</h3>
                    <p class="text-sm text-blue-600 mb-3">í˜„ì¬ ì§„ë„: <span id="basic-current-progress">ë¡œë”© ì¤‘...</span></p>
                    <p class="text-sm text-blue-600 mb-3">ë‹¤ìŒ ë¬¸ì œ: <span id="basic-next-question">ë¡œë”© ì¤‘...</span></p>
                    <button onclick="testBasicContinue()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">
                        ì´ì–´í’€ê¸° ì‹œì‘
                    </button>
                </div>
                
                <!-- ì¹´í…Œê³ ë¦¬ë³„ ì´ì–´í’€ê¸° -->
                <div class="bg-green-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-green-800 mb-3">ğŸ¯ ì¹´í…Œê³ ë¦¬ë³„ ì´ì–´í’€ê¸°</h3>
                    <select id="category-select" class="w-full p-2 border rounded mb-3">
                        <option value="ì¬ì‚°ë³´í—˜">ì¬ì‚°ë³´í—˜</option>
                        <option value="íŠ¹ì¢…ë³´í—˜">íŠ¹ì¢…ë³´í—˜</option>
                        <option value="ë°°ìƒë³´í—˜">ë°°ìƒë³´í—˜</option>
                        <option value="í•´ìƒë³´í—˜">í•´ìƒë³´í—˜</option>
                    </select>
                    <p class="text-sm text-green-600 mb-3">í˜„ì¬ ì§„ë„: <span id="category-current-progress">ë¡œë”© ì¤‘...</span></p>
                    <p class="text-sm text-green-600 mb-3">ë‹¤ìŒ ë¬¸ì œ: <span id="category-next-question">ë¡œë”© ì¤‘...</span></p>
                    <button onclick="testCategoryContinue()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded">
                        ì´ì–´í’€ê¸° ì‹œì‘
                    </button>
                </div>
            </div>
        </div>

        <!-- ì‹œìŠ¤í…œ ë¦¬ì…‹ ì˜ì—­ -->
        <div class="bg-white rounded-lg shadow-md p-8">
            <h2 class="text-2xl font-semibold mb-6">ğŸ”„ ì‹œìŠ¤í…œ ê´€ë¦¬</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-red-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-red-800 mb-3">âš ï¸ ì‹œìŠ¤í…œ ë¦¬ì…‹</h3>
                    <p class="text-sm text-red-600 mb-3">ëª¨ë“  ì§„ë„ ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.</p>
                    <button onclick="resetSystem()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded">
                        ì‹œìŠ¤í…œ ë¦¬ì…‹
                    </button>
                </div>
                
                <div class="bg-yellow-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-yellow-800 mb-3">ğŸ“‹ ì‹œìŠ¤í…œ ì •ë³´</h3>
                    <p class="text-sm text-yellow-600 mb-3">í˜„ì¬ ì‹œìŠ¤í…œ ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤.</p>
                    <button onclick="showSystemInfo()" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded">
                        ì‹œìŠ¤í…œ ì •ë³´
                    </button>
                </div>
            </div>
        </div>

        <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="text-center mt-8">
            <button onclick="goHome()" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg">
                ğŸ  í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
            </button>
        </div>
    </div>

    <!-- í†µê³„ ì‹œìŠ¤í…œ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ -->
    <script src="/static/js/progress_manager.js"></script>
    <script src="/static/js/stats_calculator.js"></script>
    <script src="/static/js/ui_updater.js"></script>
    <script src="/static/js/progress_system.js"></script>
    
    <!-- í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        // ë¡œê·¸ ì¶œë ¥ í•¨ìˆ˜
        function log(message) {
            const logElement = document.getElementById('test-log');
            const timestamp = new Date().toLocaleTimeString();
            logElement.innerHTML += `<div>[${timestamp}] ${message}</div>`;
            logElement.scrollTop = logElement.scrollHeight;
        }

        // ëª¨ë“ˆ ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateModuleStatus() {
            // ProgressManager ìƒíƒœ
            if (typeof progressManager !== 'undefined') {
                document.getElementById('progress-manager-status').textContent = 'âœ… ë¡œë“œë¨';
                document.getElementById('progress-manager-status').className = 'text-sm text-green-600';
            } else {
                document.getElementById('progress-manager-status').textContent = 'âŒ ë¡œë“œ ì‹¤íŒ¨';
                document.getElementById('progress-manager-status').className = 'text-sm text-red-600';
            }

            // StatsCalculator ìƒíƒœ
            if (typeof statsCalculator !== 'undefined') {
                document.getElementById('stats-calculator-status').textContent = 'âœ… ë¡œë“œë¨';
                document.getElementById('stats-calculator-status').className = 'text-sm text-green-600';
            } else {
                document.getElementById('stats-calculator-status').textContent = 'âŒ ë¡œë“œ ì‹¤íŒ¨';
                document.getElementById('stats-calculator-status').className = 'text-sm text-red-600';
            }

            // UIUpdater ìƒíƒœ
            if (typeof uiUpdater !== 'undefined') {
                document.getElementById('ui-updater-status').textContent = 'âœ… ë¡œë“œë¨';
                document.getElementById('ui-updater-status').className = 'text-sm text-green-600';
            } else {
                document.getElementById('ui-updater-status').textContent = 'âŒ ë¡œë“œ ì‹¤íŒ¨';
                document.getElementById('ui-updater-status').className = 'text-sm text-red-600';
            }

            // ProgressSystem ìƒíƒœ
            if (typeof progressSystem !== 'undefined') {
                document.getElementById('progress-system-status').textContent = 'âœ… ë¡œë“œë¨';
                document.getElementById('progress-system-status').className = 'text-sm text-green-600';
            } else {
                document.getElementById('progress-system-status').textContent = 'âŒ ë¡œë“œ ì‹¤íŒ¨';
                document.getElementById('progress-system-status').className = 'text-sm text-red-600';
            }
        }

        // í†µê³„ ë°ì´í„° ì—…ë°ì´íŠ¸
        function updateStatsDisplay() {
            if (typeof progressSystem !== 'undefined' && progressSystem.isInitialized) {
                // ê¸°ë³¸í•™ìŠµ í†µê³„
                const basicStats = progressSystem.getStats('basic');
                if (basicStats) {
                    document.getElementById('basic-stats').innerHTML = `
                        <p>ì§„í–‰ë¥ : ${basicStats.progressPercent}%</p>
                        <p>ì •ë‹µë¥ : ${basicStats.accuracy}%</p>
                        <p>ì´ ì‹œë„: ${basicStats.totalAttempted}ë¬¸ì œ</p>
                        <p>ì´ ì •ë‹µ: ${basicStats.totalCorrect}ë¬¸ì œ</p>
                        <p>ì˜¤ëŠ˜ ì‹œë„: ${basicStats.todayAttempted}ë¬¸ì œ</p>
                        <p>ì˜¤ëŠ˜ ì •ë‹µ: ${basicStats.todayCorrect}ë¬¸ì œ</p>
                    `;
                }

                // ì˜¤ëŠ˜ í†µê³„
                const todayStats = progressSystem.getStats('today');
                if (todayStats) {
                    document.getElementById('today-stats').innerHTML = `
                        <p>ì „ì²´ ì‹œë„: ${todayStats.total.attempted}ë¬¸ì œ</p>
                        <p>ì „ì²´ ì •ë‹µ: ${todayStats.total.correct}ë¬¸ì œ</p>
                        <p>ì „ì²´ ì •ë‹µë¥ : ${todayStats.total.accuracy}%</p>
                        <p>ê¸°ë³¸í•™ìŠµ ì‹œë„: ${todayStats.basic.attempted}ë¬¸ì œ</p>
                        <p>ê¸°ë³¸í•™ìŠµ ì •ë‹µ: ${todayStats.basic.correct}ë¬¸ì œ</p>
                        <p>ê¸°ë³¸í•™ìŠµ ì •ë‹µë¥ : ${todayStats.basic.accuracy}%</p>
                    `;
                }

                // ì´ì–´í’€ê¸° ì •ë³´ ì—…ë°ì´íŠ¸
                const basicProgress = progressSystem.getProgress();
                if (basicProgress) {
                    document.getElementById('basic-current-progress').textContent = `${basicProgress.basicLearning.lastQuestion}ë²ˆ`;
                    document.getElementById('basic-next-question').textContent = `${progressSystem.getNextQuestion('basic')}ë²ˆ`;
                }

                // ì¹´í…Œê³ ë¦¬ë³„ ì •ë³´ ì—…ë°ì´íŠ¸
                const selectedCategory = document.getElementById('category-select').value;
                if (basicProgress && basicProgress.categories[selectedCategory]) {
                    const categoryData = basicProgress.categories[selectedCategory];
                    document.getElementById('category-current-progress').textContent = `${categoryData.lastQuestion}ë²ˆ`;
                    document.getElementById('category-next-question').textContent = `${progressSystem.getNextQuestion(selectedCategory)}ë²ˆ`;
                }
            }
        }

        // í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ë“¤
        function testSaveProgress() {
            log('ğŸ§ª ì§„ë„ ì €ì¥ í…ŒìŠ¤íŠ¸ ì‹œì‘...');
            
            if (typeof progressSystem !== 'undefined' && progressSystem.isInitialized) {
                // ê¸°ë³¸í•™ìŠµ ì§„ë„ ì €ì¥ í…ŒìŠ¤íŠ¸
                const result1 = progressSystem.saveProgress('basic', 5, true);
                log(`ê¸°ë³¸í•™ìŠµ ì§„ë„ ì €ì¥: ${result1 ? 'âœ… ì„±ê³µ' : 'âŒ ì‹¤íŒ¨'}`);
                
                // ì¹´í…Œê³ ë¦¬ ì§„ë„ ì €ì¥ í…ŒìŠ¤íŠ¸
                const result2 = progressSystem.saveProgress('ì¬ì‚°ë³´í—˜', 10, false);
                log(`ì¬ì‚°ë³´í—˜ ì§„ë„ ì €ì¥: ${result2 ? 'âœ… ì„±ê³µ' : 'âŒ ì‹¤íŒ¨'}`);
                
                // í†µê³„ ì—…ë°ì´íŠ¸
                updateStatsDisplay();
                log('ğŸ“Š í†µê³„ ì—…ë°ì´íŠ¸ ì™„ë£Œ');
            } else {
                log('âŒ ProgressSystemì´ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
            }
        }

        function testGetNextQuestion() {
            log('ğŸ”„ ë‹¤ìŒ ë¬¸ì œ ì¡°íšŒ í…ŒìŠ¤íŠ¸ ì‹œì‘...');
            
            if (typeof progressSystem !== 'undefined' && progressSystem.isInitialized) {
                const nextBasic = progressSystem.getNextQuestion('basic');
                const nextCategory = progressSystem.getNextQuestion('ì¬ì‚°ë³´í—˜');
                
                log(`ê¸°ë³¸í•™ìŠµ ë‹¤ìŒ ë¬¸ì œ: ${nextBasic}ë²ˆ`);
                log(`ì¬ì‚°ë³´í—˜ ë‹¤ìŒ ë¬¸ì œ: ${nextCategory}ë²ˆ`);
                
                updateStatsDisplay();
            } else {
                log('âŒ ProgressSystemì´ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
            }
        }

        function testUpdateStats() {
            log('ğŸ“Š í†µê³„ ì—…ë°ì´íŠ¸ í…ŒìŠ¤íŠ¸ ì‹œì‘...');
            
            if (typeof progressSystem !== 'undefined' && progressSystem.isInitialized) {
                const result = progressSystem.updateStats();
                log(`í†µê³„ ì—…ë°ì´íŠ¸: ${result ? 'âœ… ì„±ê³µ' : 'âŒ ì‹¤íŒ¨'}`);
                
                updateStatsDisplay();
            } else {
                log('âŒ ProgressSystemì´ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
            }
        }

        function testBasicContinue() {
            log('ğŸ”„ ê¸°ë³¸í•™ìŠµ ì´ì–´í’€ê¸° í…ŒìŠ¤íŠ¸...');
            
            if (typeof progressSystem !== 'undefined' && progressSystem.isInitialized) {
                const nextQuestion = progressSystem.getNextQuestion('basic');
                log(`ê¸°ë³¸í•™ìŠµ ì´ì–´í’€ê¸°: ${nextQuestion}ë²ˆ ë¬¸ì œë¶€í„° ì‹œì‘`);
                
                // ì‹¤ì œë¡œëŠ” ê¸°ë³¸í•™ìŠµ í˜ì´ì§€ë¡œ ì´ë™
                alert(`ê¸°ë³¸í•™ìŠµ ${nextQuestion}ë²ˆ ë¬¸ì œë¶€í„° ì‹œì‘í•©ë‹ˆë‹¤.`);
            } else {
                log('âŒ ProgressSystemì´ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
            }
        }

        function testCategoryContinue() {
            log('ğŸ¯ ì¹´í…Œê³ ë¦¬ë³„ ì´ì–´í’€ê¸° í…ŒìŠ¤íŠ¸...');
            
            if (typeof progressSystem !== 'undefined' && progressSystem.isInitialized) {
                const selectedCategory = document.getElementById('category-select').value;
                const nextQuestion = progressSystem.getNextQuestion(selectedCategory);
                log(`${selectedCategory} ì´ì–´í’€ê¸°: ${nextQuestion}ë²ˆ ë¬¸ì œë¶€í„° ì‹œì‘`);
                
                // ì‹¤ì œë¡œëŠ” ëŒ€ë¶„ë¥˜ í•™ìŠµ í˜ì´ì§€ë¡œ ì´ë™
                alert(`${selectedCategory} ${nextQuestion}ë²ˆ ë¬¸ì œë¶€í„° ì‹œì‘í•©ë‹ˆë‹¤.`);
            } else {
                log('âŒ ProgressSystemì´ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
            }
        }

        function resetSystem() {
            log('ğŸ”„ ì‹œìŠ¤í…œ ë¦¬ì…‹ ì‹œì‘...');
            
            if (typeof progressSystem !== 'undefined' && progressSystem.isInitialized) {
                const result = progressSystem.resetSystem();
                log(`ì‹œìŠ¤í…œ ë¦¬ì…‹: ${result ? 'âœ… ì„±ê³µ' : 'âŒ ì‹¤íŒ¨'}`);
                
                updateStatsDisplay();
            } else {
                log('âŒ ProgressSystemì´ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
            }
        }

        function showSystemInfo() {
            log('ğŸ“‹ ì‹œìŠ¤í…œ ì •ë³´ ì¡°íšŒ...');
            
            if (typeof progressSystem !== 'undefined') {
                const status = progressSystem.getSystemStatus();
                log(`ì‹œìŠ¤í…œ ìƒíƒœ: ${JSON.stringify(status, null, 2)}`);
                
                if (progressSystem.isInitialized) {
                    const progress = progressSystem.getProgress();
                    log(`í˜„ì¬ ì§„ë„: ${progress ? progress.basicLearning.lastQuestion : 'N/A'}ë²ˆ`);
                }
            } else {
                log('âŒ ProgressSystemì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }
        }

        function goHome() {
            window.location.href = '/home';
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            log('ğŸ¯ í†µê³„ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë“œë¨');
            
            // ëª¨ë“ˆ ìƒíƒœ í™•ì¸
            setTimeout(() => {
                updateModuleStatus();
                
                // ProgressSystem ì´ˆê¸°í™”
                if (typeof progressSystem !== 'undefined') {
                    const initResult = progressSystem.initialize();
                    log(`ProgressSystem ì´ˆê¸°í™”: ${initResult ? 'âœ… ì„±ê³µ' : 'âŒ ì‹¤íŒ¨'}`);
                    
                    if (initResult) {
                        updateStatsDisplay();
                        log('ğŸ“Š ì´ˆê¸° í†µê³„ ë°ì´í„° ë¡œë“œ ì™„ë£Œ');
                    }
                } else {
                    log('âŒ ProgressSystem ëª¨ë“ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
            }, 1000);
        });

        // ì¹´í…Œê³ ë¦¬ ì„ íƒ ë³€ê²½ ì‹œ ì •ë³´ ì—…ë°ì´íŠ¸
        document.getElementById('category-select').addEventListener('change', function() {
            updateStatsDisplay();
        });
    </script>
</body>
</html>
