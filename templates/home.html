<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACIU S4 - 대문</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/static/css/dday_counter.css">
    <link rel="stylesheet" href="/static/css/predicted_scores.css">
    <link rel="stylesheet" href="/static/css/incorrect_analysis.css">
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- 헤더 및 사용자 정보 -->
        <div class="flex justify-between items-center mb-8">
            <!-- 좌측: 사용자 정보 -->
            <div id="user-info" class="bg-white rounded-lg shadow-lg p-4">
                <div id="user-details" class="text-sm">
                    <!-- 사용자 정보가 여기에 동적으로 표시됩니다 -->
                </div>
            </div>
            
            <!-- 중앙: 제목 -->
            <div class="text-center">
                        <h1 class="text-4xl font-bold text-gray-800 mb-2">🎓 AICU Season 4</h1>
        <p class="text-gray-600">보험중개사 시험 준비 플랫폼</p>
        
        <!-- D-day 카운터 영역 -->
        <div class="dday-container text-center mb-6">
            <h3 class="text-lg font-semibold mb-2">📅 시험까지 남은 시간</h3>
            <div id="dday-counter" class="dday-display"></div>
        </div>
        
        <!-- 사용자 정보 표시 영역 -->  
        <div id="user-exam-info" class="user-info-container">
            <!-- D-day 카운터가 여기에 표시됨 -->
        </div>
            </div>
            
            <!-- 우측: 빈 공간 (균형을 위해) -->
            <div class="w-48"></div>
        </div>

        <!-- 주요 학습 현황 카드들 -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <!-- 학습 진도 -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">학습 진도</p>
                        <p class="text-2xl font-bold text-blue-600" id="progress-rate">0.0% (0/789)</p>
                        <p class="text-sm text-gray-500">정답률: <span id="accuracy-rate">0%</span></p>
                    </div>
                    <div class="text-3xl">📚</div>
                </div>
            </div>

            <!-- 총 학습 현황 -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">총 학습 현황</p>
                        <p class="text-2xl font-bold text-green-600" id="total-attempts">시도: 0</p>
                        <p class="text-sm text-gray-500">정답: <span id="total-correct">0</span></p>
                    </div>
                    <div class="text-3xl">📊</div>
                </div>
            </div>

            <!-- 오늘 학습 -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">오늘 학습</p>
                        <p class="text-2xl font-bold text-purple-600" id="today-progress">로딩 중...</p>
                        <p class="text-sm text-gray-500">정답률: <span id="today-accuracy">로딩 중...</span></p>
                    </div>
                    <div class="text-3xl">🎯</div>
                </div>
            </div>
        </div>

        <!-- 주요 기능 섹션 -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <!-- 기본학습 -->
            <div class="bg-white rounded-lg shadow-lg p-6 hover:shadow-xl transition-shadow">
                <div class="text-center">
                    <div class="text-4xl mb-4">📚</div>
                    <h3 class="text-xl font-bold text-blue-800 mb-2">기본학습</h3>
                    <p class="text-gray-600 mb-4">전체 문제 학습</p>
                    <a href="/basic-learning" 
                       class="inline-block bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                        학습 시작
                    </a>
                </div>
            </div>

            <!-- 대분류학습 -->
            <div class="bg-white rounded-lg shadow-lg p-6 hover:shadow-xl transition-shadow">
                <div class="text-center">
                    <div class="text-4xl mb-4">🎯</div>
                    <h3 class="text-xl font-bold text-green-800 mb-2">대분류학습</h3>
                    <p class="text-gray-600 mb-4">카테고리별 학습</p>
                    <a href="/large-category-learning" 
                       class="inline-block bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                        학습 시작
                    </a>
                </div>
            </div>

            <!-- 고급 통계 -->
            <div class="bg-white rounded-lg shadow-lg p-6 hover:shadow-xl transition-shadow">
                <div class="text-center">
                    <div class="text-4xl mb-4">📊</div>
                    <h3 class="text-xl font-bold text-purple-800 mb-2">고급 통계</h3>
                    <p class="text-gray-600 mb-4">상세 분석 및 패턴</p>
                    <a href="/statistics" 
                       class="inline-block bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                        통계 보기
                    </a>
                </div>
            </div>



            <!-- 설정 -->
            <div class="bg-white rounded-lg shadow-lg p-6 hover:shadow-xl transition-shadow">
                <div class="text-center">
                    <div class="text-4xl mb-4">⚙️</div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">설정</h3>
                    <p class="text-gray-600 mb-4">사용자 정보 관리</p>
                    <a href="/settings" 
                       class="inline-block bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                        설정
                    </a>
                </div>
            </div>
        </div>

        <!-- 예상 점수 및 합격 확률 섹션 (페이지 하단) -->
        <div class="max-w-7xl mx-auto bg-white rounded-lg shadow-lg p-6 mb-8">
            <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">📊 예상 점수 및 합격 확률</h3>
            
            <!-- 전체 상태 및 합격 확률 (가로 배치) -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                <!-- 전체 상태 -->
                <div id="overall-status-container">
                    <!-- 전체 상태가 여기에 표시됩니다 -->
                </div>
                
                <!-- 합격 확률 -->
                <div id="pass-probability-container">
                    <!-- 합격 확률이 여기에 표시됩니다 -->
                </div>
            </div>
            
            <!-- 과목별 예상 점수 (가로 배치) -->
            <div id="predicted-scores-container">
                <!-- 과목별 예상 점수가 여기에 표시됩니다 -->
            </div>
            
            <!-- 오답 분석 및 개인 맞춤 인사이트 -->
            <div id="incorrect-analysis-container" class="mt-8">
                <!-- 오답 분석이 여기에 표시됩니다 -->
            </div>
        </div>

        <!-- 개발자 도구 섹션 -->
        <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-6">
            <h3 class="text-lg font-bold text-gray-800 mb-4">🔧 개발자 도구</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <button onclick="testStatisticsSystem()" 
                        class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors">
                    🚀 통계 시스템 테스트
                </button>
                <button onclick="debugSession()" 
                        class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors">
                    🔍 세션 디버그
                </button>
                <button onclick="testAdvancedStatistics()" 
                        class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg transition-colors">
                    📊 고도화된 통계 테스트
                </button>
                <button onclick="testLearningPatternAnalysis()" 
                        class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors">
                    🧠 학습 패턴 분석 테스트
                </button>
                <button onclick="testPersonalizedRecommendation()" 
                        class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors">
                    🎯 개인 맞춤 추천 테스트
                </button>
                                  <button onclick="testPerformanceOptimization()" 
                          class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg transition-colors">
                      ⚡ 성능 최적화 테스트
                  </button>
                  <button onclick="testFinalIntegration()" 
                          class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors">
                      🔍 최종 통합 테스트
                  </button>
                  <button onclick="testDocumentation()" 
                          class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors">
                      📚 문서화 테스트
                  </button>
                  <button onclick="testDataMigration()" 
                          class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors">
                      🔄 데이터 마이그레이션 테스트
                  </button>
            </div>
        </div>
    </div>

    <script>
        // 페이지 로드 시 사용자 정보 표시 및 통계 로드
        document.addEventListener('DOMContentLoaded', function() {
            console.log('=== 대문 페이지 로드 ===');
            loadUserInfo();
            loadStatistics();
        });

        // 사용자 정보 로드 및 표시
        function loadUserInfo() {
            try {
                const userData = localStorage.getItem('aicu_user_data');
                
                if (userData) {
                    const user = JSON.parse(userData);
                    displayUserInfo(user);
                    console.log('✅ 사용자 정보 로드 완료:', user);
                } else {
                    console.log('❌ 사용자 정보 없음');
                    // 사용자 정보가 없으면 등록 페이지로 이동
                    window.location.href = '/register';
                }
                
            } catch (error) {
                console.error('❌ 사용자 정보 로드 실패:', error);
                // 에러 발생 시 등록 페이지로 이동
                window.location.href = '/register';
            }
        }

        // 사용자 정보 표시
        function displayUserInfo(user) {
            const userDetailsElement = document.getElementById('user-details');
            
            // D-Day 계산
            const examDate = new Date(user.exam_date);
            const today = new Date();
            const timeDiff = examDate.getTime() - today.getTime();
            const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));
            const dDayText = daysDiff > 0 ? `D-${daysDiff}` : `D+${Math.abs(daysDiff)}`;
            
            userDetailsElement.innerHTML = `
                <div class="font-medium text-gray-800">👤 ${user.name}</div>
                <div class="text-gray-600">📅 ${user.exam_date} (${dDayText})</div>
            `;
        }

        // 통계 데이터 로드
        function loadStatistics() {
            try {
                console.log('=== 대문 페이지 통계 로드 시작 ===');
                
                // LocalStorage에서 통계 데이터 로드
                const statsData = localStorage.getItem('aicu_statistics') || '{}';
                const stats = JSON.parse(statsData);
                
                // 사용자 정보 로드
                const userData = localStorage.getItem('aicu_user_data') || '{}';
                const user = JSON.parse(userData);
                
                console.log('📊 로드된 통계:', stats);
                console.log('👤 사용자 정보:', user);
                
                // 등록 시점 기반 통계 표시
                displayRegistrationBasedStatistics(stats, user);
                
            } catch (error) {
                console.error('❌ 통계 로드 실패:', error);
                displayRegistrationBasedStatistics({}, {});
            }
        }

        // 등록 시점 기반 통계 표시 (새로운 시스템과 일치하도록 업데이트)
                            function displayRegistrationBasedStatistics(stats, user) {
                        console.log('=== 새로운 통계 시스템 - 홈페이지 통계 표시 시작 ===');
                        console.log('📊 받은 통계 데이터:', stats);
                        
                        // 이어풀기 데이터와 동기화 확인
                        const progressData = localStorage.getItem('aicu_quiz_progress');
                        if (progressData) {
                            const progress = JSON.parse(progressData);
                            const currentQuestionIndex = progress.currentQuestionIndex || 0;
                            
                            // 통계가 이어풀기보다 적으면 이어풀기에 맞춤
                            if (stats.total_questions_attempted < currentQuestionIndex) {
                                console.log(`⚠️ 홈페이지: 통계(${stats.total_questions_attempted}) < 이어풀기(${currentQuestionIndex}). 이어풀기에 맞춤`);
                                stats.total_questions_attempted = currentQuestionIndex;
                                stats.accuracy_rate = stats.total_correct_answers > 0 
                                    ? Math.round((stats.total_correct_answers / currentQuestionIndex) * 100)
                                    : 0;
                            }
                        }
            
            // 등록 시점 정보 표시
            const registrationInfo = document.getElementById('registration-info');
            if (registrationInfo && user.registration_date) {
                const registrationDate = new Date(user.registration_date);
                const daysSinceRegistration = Math.floor((new Date() - registrationDate) / (1000 * 60 * 60 * 24));
                registrationInfo.textContent = `등록일: ${user.registration_date} (${daysSinceRegistration}일째)`;
            }
            
            // 1. 학습 진도 (전체 문제 중 풀이한 문제 비율)
            const progressRateElement = document.getElementById('progress-rate');
            if (progressRateElement) {
                const totalQuestions = 789; // 전체 문제 수
                const totalAttempted = stats.total_questions_attempted || 0;
                const progressRate = totalQuestions > 0 
                    ? ((totalAttempted / totalQuestions) * 100).toFixed(1) 
                    : 0;
                progressRateElement.textContent = `${progressRate}% (${totalAttempted}/${totalQuestions})`;
                console.log(`📊 학습 진도: ${progressRate}% (${totalAttempted}/${totalQuestions})`);
            }
            
            // 2. 총 학습 현황 (전체 풀이 문제 중 정답률)
            const totalAttemptsElement = document.getElementById('total-attempts');
            const totalCorrectElement = document.getElementById('total-correct');
            if (totalAttemptsElement && totalCorrectElement) {
                const totalAttempted = stats.total_questions_attempted || 0;
                const totalCorrect = stats.total_correct_answers || 0;
                totalAttemptsElement.textContent = `시도: ${totalAttempted}`;
                totalCorrectElement.textContent = totalCorrect;
                console.log(`📊 총 학습 현황: 시도 ${totalAttempted}, 정답 ${totalCorrect}`);
            }
            
            // 3. 오늘 학습 (오늘 풀이한 총 문제수와 정답률)
            const todayProgressElement = document.getElementById('today-progress');
            const todayAccuracyElement = document.getElementById('today-accuracy');
            if (todayProgressElement && todayAccuracyElement) {
                const today = new Date().toISOString().split('T')[0];
                const todayStats = stats.daily_progress?.[today] || { attempted: 0, correct: 0, accuracy: 0 };
                const todayAttempted = todayStats.attempted || 0;
                const todayAccuracy = todayStats.accuracy || 0;
                todayProgressElement.textContent = `${todayAttempted}문제`;
                todayAccuracyElement.textContent = `${todayAccuracy}%`;
                console.log(`📊 오늘 학습: ${todayAttempted}문제, 정답률 ${todayAccuracy}%`);
            }
            
            // 4. 전체 정답률 표시 (학습 진도 카드의 정답률)
            const accuracyRateElement = document.getElementById('accuracy-rate');
            if (accuracyRateElement) {
                const accuracyRate = stats.accuracy_rate || 0;
                accuracyRateElement.textContent = `${accuracyRate}%`;
                console.log(`📊 전체 정답률: ${accuracyRate}%`);
            }
            
            console.log('✅ 새로운 통계 시스템 - 홈페이지 통계 표시 완료');
            console.log('📊 최종 표시된 통계:', {
                total_questions_attempted: stats.total_questions_attempted || 0,
                total_correct_answers: stats.total_correct_answers || 0,
                accuracy_rate: stats.accuracy_rate || 0,
                today_stats: stats.daily_progress?.[new Date().toISOString().split('T')[0]] || { attempted: 0, correct: 0, accuracy: 0 }
            });
        }

        // 개발자 도구 함수들
        function testStatisticsSystem() {
            console.log('=== 통계 시스템 테스트 시작 ===');
            const userData = localStorage.getItem('aicu_user_data');
            const statsData = localStorage.getItem('aicu_statistics');
            
            console.log('사용자 데이터:', userData ? JSON.parse(userData) : '없음');
            console.log('통계 데이터:', statsData ? JSON.parse(statsData) : '없음');
            
            alert('통계 시스템 테스트가 콘솔에 출력되었습니다. (F12로 확인)');
        }

        function debugSession() {
            console.log('=== 세션 디버그 시작 ===');
            console.log('LocalStorage 전체 내용:');
            
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                const value = localStorage.getItem(key);
                console.log(`${key}:`, value);
            }
            
            alert('세션 디버그 정보가 콘솔에 출력되었습니다. (F12로 확인)');
        }

        // 고도화된 통계 테스트
        function testAdvancedStatistics() {
            console.log('=== 고도화된 통계 테스트 시작 ===');
            
            try {
                // 고급 통계 관리자 상태 확인
                if (window.advancedStatisticsManager) {
                    const status = window.advancedStatisticsManager.getSystemStatus();
                    console.log('📊 고급 통계 관리자 상태:', status);
                    
                    // 통계 데이터 내보내기 테스트
                    const exportData = window.advancedStatisticsManager.exportStatisticsData();
                    console.log('📊 내보낸 통계 데이터:', exportData);
                    
                    // 모든 통계 업데이트 테스트
                    window.advancedStatisticsManager.updateAllStatistics();
                    
                    alert('✅ 고도화된 통계 테스트 완료!\n\n콘솔에서 상세 결과를 확인하세요.');
                } else {
                    console.error('❌ 고급 통계 관리자를 찾을 수 없습니다.');
                    alert('❌ 고급 통계 관리자를 찾을 수 없습니다.');
                }
                
            } catch (error) {
                console.error('❌ 고도화된 통계 테스트 실패:', error);
                alert('❌ 고도화된 통계 테스트 실패: ' + error.message);
            }
        }

        // 학습 패턴 분석 테스트
        function testLearningPatternAnalysis() {
            console.log('=== 학습 패턴 분석 테스트 시작 ===');
            
            try {
                // 학습 패턴 분석기 상태 확인
                if (window.learningPatternAnalyzer) {
                    const status = window.learningPatternAnalyzer.getSystemStatus();
                    console.log('📊 학습 패턴 분석기 상태:', status);
                    
                    // 패턴 데이터 조회
                    const patternData = window.learningPatternAnalyzer.getPatternData();
                    console.log('📊 패턴 데이터:', patternData);
                    
                    // 분석 결과 조회
                    const analysisResults = window.learningPatternAnalyzer.getAnalysisResults();
                    console.log('📊 분석 결과:', analysisResults);
                    
                    // 학습 패턴 분석 실행
                    const newAnalysis = window.learningPatternAnalyzer.analyzeLearningPatterns();
                    console.log('📊 새로운 분석 결과:', newAnalysis);
                    
                    alert('✅ 학습 패턴 분석 테스트 완료!\n\n콘솔에서 상세 결과를 확인하세요.');
                } else {
                    console.error('❌ 학습 패턴 분석기를 찾을 수 없습니다.');
                    alert('❌ 학습 패턴 분석기를 찾을 수 없습니다.');
                }
                
            } catch (error) {
                console.error('❌ 학습 패턴 분석 테스트 실패:', error);
                alert('❌ 학습 패턴 분석 테스트 실패: ' + error.message);
            }
        }

                            // 개인 맞춤 추천 시스템 테스트
                      function testPersonalizedRecommendation() {
                          console.log('=== 개인 맞춤 추천 시스템 테스트 시작 ===');
                          
                          try {
                              // 개인 맞춤 추천 시스템 상태 확인
                              if (window.personalizedRecommendationSystem) {
                                  const status = window.personalizedRecommendationSystem.getSystemStatus();
                                  console.log('📊 개인 맞춤 추천 시스템 상태:', status);
                                  
                                  // 사용자 프로필 조회
                                  const userProfile = window.personalizedRecommendationSystem.getUserProfile();
                                  console.log('📊 사용자 프로필:', userProfile);
                                  
                                  // 추천 결과 조회
                                  const recommendations = window.personalizedRecommendationSystem.getRecommendations();
                                  console.log('📊 기존 추천 결과:', recommendations);
                                  
                                  // 새로운 추천 생성
                                  const newRecommendations = window.personalizedRecommendationSystem.generateRecommendations();
                                  console.log('📊 새로운 추천 결과:', newRecommendations);
                                  
                                  // 추천 요청 이벤트 발생
                                  const event = new CustomEvent('recommendationRequested', {
                                      detail: { type: 'test', category: 'all' }
                                  });
                                  document.dispatchEvent(event);
                                  
                                  alert('✅ 개인 맞춤 추천 시스템 테스트 완료!\n\n콘솔에서 상세 결과를 확인하세요.');
                              } else {
                                  console.error('❌ 개인 맞춤 추천 시스템을 찾을 수 없습니다.');
                                  alert('❌ 개인 맞춤 추천 시스템을 찾을 수 없습니다.');
                              }
                              
                          } catch (error) {
                              console.error('❌ 개인 맞춤 추천 시스템 테스트 실패:', error);
                              alert('❌ 개인 맞춤 추천 시스템 테스트 실패: ' + error.message);
                          }
                      }

                    // 성능 최적화 테스트
                      function testPerformanceOptimization() {
                          console.log('=== 성능 최적화 테스트 시작 ===');
                          
                          try {
                              // 성능 최적화 시스템 상태 확인
                              if (window.performanceOptimizer) {
                                  const status = window.performanceOptimizer.getSystemStatus();
                                  console.log('📊 성능 최적화 시스템 상태:', status);
                                  
                                  // 성능 최적화 테스트 실행
                                  const testResult = window.performanceOptimizer.testPerformanceOptimization();
                                  console.log('📊 성능 최적화 테스트 결과:', testResult);
                                  
                                  // 성능 리포트 생성
                                  const report = window.performanceOptimizer.generatePerformanceReport();
                                  console.log('📊 성능 리포트:', report);
                                  
                                  alert('✅ 성능 최적화 테스트 완료!\n\n콘솔에서 상세 결과를 확인하세요.');
                              } else {
                                  console.error('❌ 성능 최적화 시스템을 찾을 수 없습니다.');
                                  alert('❌ 성능 최적화 시스템을 찾을 수 없습니다.');
                              }
                              
                          } catch (error) {
                              console.error('❌ 성능 최적화 테스트 실패:', error);
                              alert('❌ 성능 최적화 테스트 실패: ' + error.message);
                          }
                      }

                    // 최종 통합 테스트
                      function testFinalIntegration() {
                          console.log('=== 최종 통합 테스트 시작 ===');
                          
                          try {
                              // 최종 통합 테스트 관리자 상태 확인
                              if (window.integrationTestManager) {
                                  const status = window.integrationTestManager.getSystemStatus();
                                  console.log('📊 최종 통합 테스트 관리자 상태:', status);
                                  
                                  // 최종 통합 테스트 실행
                                  const testResult = window.integrationTestManager.testFinalIntegration();
                                  console.log('📊 최종 통합 테스트 결과:', testResult);
                                  
                                  if (testResult.success) {
                                      alert('✅ 최종 통합 테스트 완료!\n\n모든 테스트가 성공적으로 통과했습니다.\n콘솔에서 상세 결과를 확인하세요.');
                                  } else {
                                      alert('⚠️ 최종 통합 테스트 완료!\n\n일부 테스트에서 문제가 발견되었습니다.\n콘솔에서 상세 결과를 확인하세요.');
                                  }
                              } else {
                                  console.error('❌ 최종 통합 테스트 관리자를 찾을 수 없습니다.');
                                  alert('❌ 최종 통합 테스트 관리자를 찾을 수 없습니다.');
                              }
                              
                          } catch (error) {
                              console.error('❌ 최종 통합 테스트 실패:', error);
                              alert('❌ 최종 통합 테스트 실패: ' + error.message);
                          }
                      }

                    // 문서화 테스트
                      function testDocumentation() {
                          console.log('=== 문서화 테스트 시작 ===');
                          
                          try {
                              // 문서화 관리자 상태 확인
                              if (window.documentationManager) {
                                  const status = window.documentationManager.getSystemStatus();
                                  console.log('📊 문서화 관리자 상태:', status);
                                  
                                  // 문서 생성
                                  const docResult = window.documentationManager.generateDocumentation();
                                  console.log('📊 문서 생성 결과:', docResult);
                                  
                                  // 문서화 테스트 실행
                                  const testResult = window.documentationManager.testDocumentation();
                                  console.log('📊 문서화 테스트 결과:', testResult);
                                  
                                  // 모든 문서 목록 조회
                                  const allDocs = window.documentationManager.getAllDocuments();
                                  console.log('📊 모든 문서 목록:', allDocs);
                                  
                                  if (testResult.success && testResult.allPassed) {
                                      alert('✅ 문서화 테스트 완료!\n\n모든 문서가 성공적으로 생성되었습니다.\n콘솔에서 상세 결과를 확인하세요.');
                                  } else {
                                      alert('⚠️ 문서화 테스트 완료!\n\n일부 문서에서 문제가 발견되었습니다.\n콘솔에서 상세 결과를 확인하세요.');
                                  }
                              } else {
                                  console.error('❌ 문서화 관리자를 찾을 수 없습니다.');
                                  alert('❌ 문서화 관리자를 찾을 수 없습니다.');
                              }
                              
                          } catch (error) {
                              console.error('❌ 문서화 테스트 실패:', error);
                              alert('❌ 문서화 테스트 실패: ' + error.message);
                          }
                      }

        // 데이터 마이그레이션 테스트
        function testDataMigration() {
            console.log('=== 데이터 마이그레이션 테스트 시작 ===');
            
            try {
                // 마이그레이션 매니저 상태 확인
                if (window.DataMigrationManager) {
                    console.log('✅ DataMigrationManager 발견');
                    
                    // 마이그레이션 상태 확인
                    const migrationStatus = window.DataMigrationManager.checkMigrationStatus();
                    console.log('📊 마이그레이션 상태:', migrationStatus);
                    
                    if (migrationStatus) {
                        alert('✅ 마이그레이션 성공!\n\n유효한 데이터가 중앙 시스템에 있습니다.\n콘솔에서 상세 결과를 확인하세요.');
                    } else {
                        const shouldForceMigration = confirm('❌ 마이그레이션 실패!\n\n중앙 시스템에 데이터가 없습니다.\n강제 마이그레이션을 실행하시겠습니까?');
                        
                        if (shouldForceMigration) {
                            console.log('🔄 강제 마이그레이션 실행...');
                            window.DataMigrationManager.forceMigration();
                            
                            // 마이그레이션 후 상태 재확인
                            setTimeout(() => {
                                const newStatus = window.DataMigrationManager.checkMigrationStatus();
                                if (newStatus) {
                                    alert('✅ 강제 마이그레이션 성공!\n\n이제 모든 페이지에서 데이터가 정상적으로 표시될 것입니다.');
                                } else {
                                    alert('❌ 강제 마이그레이션 실패!\n\n콘솔에서 오류를 확인하세요.');
                                }
                            }, 1000);
                        }
                    }
                } else {
                    console.error('❌ DataMigrationManager를 찾을 수 없습니다.');
                    alert('❌ DataMigrationManager를 찾을 수 없습니다.');
                }
                
            } catch (error) {
                console.error('❌ 데이터 마이그레이션 테스트 실패:', error);
                alert('❌ 데이터 마이그레이션 테스트 실패: ' + error.message);
            }
        }

    </script>
    
    <!-- Week1 고급통계 스크립트 -->
    <script src="/static/js/performance_monitor.js"></script>
    <script src="/static/js/rollback_manager.js"></script>
    <script src="/static/js/guest_mode_defaults.js"></script>
    <script src="/static/js/dday_counter.js"></script>
    <script src="/static/js/predicted_scores.js"></script>
    <!-- Week3 고급통계 스크립트 -->
    <script src="/static/js/incorrect_analysis.js"></script>
    <!-- 중앙 데이터 관리자 -->
    <script src="/static/js/central_data_manager.js"></script>
    
    <!-- 데이터 마이그레이션 매니저 -->
    <script src="/static/js/data_migration_manager.js"></script>
    
    <!-- 호환성 레이어 -->
    <script src="/static/js/compatibility_layer.js"></script>
    <!-- 문제 풀이 데이터 수집 어댑터 -->
    <script src="/static/js/quiz_data_collector.js"></script>
    <!-- 실시간 데이터 동기화 매니저 -->
    <script src="/static/js/realtime_sync_manager.js"></script>
    <!-- 고급 통계 기능 통합 관리자 -->
    <script src="/static/js/advanced_statistics_manager.js"></script>
    <!-- 학습 패턴 분석 관리자 -->
    <script src="/static/js/learning_pattern_analyzer.js"></script>
                    <!-- 개인 맞춤 추천 시스템 -->
                <script src="/static/js/personalized_recommendation_system.js"></script>
                <!-- 성능 최적화 및 안정성 강화 시스템 -->
                <script src="/static/js/performance_optimizer.js"></script>
                <!-- 최종 통합 테스트 및 검증 관리자 -->
                <script src="/static/js/integration_test_manager.js"></script>
                <!-- 문서화 및 배포 준비 관리자 -->
                <script src="/static/js/documentation_manager.js"></script>
</body>
</html>
