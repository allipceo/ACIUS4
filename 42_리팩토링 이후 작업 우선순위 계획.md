# 리팩토링 이후 작업 우선순위 계획

**기준 시점**: app_v1.7.py 리팩토링 완료 후  
**목표**: Week2 조대표님 8개 핵심 통계 요구사항 구현  
**원칙**: 분할 개발 원칙 준수 + 기존 자산 최대 활용  

---

## 🔥 **1순위: 즉시 착수 (리팩토링 완료 후 바로)**

### **Priority 1-A: Week1 모듈 통합 (1일)**
**목표**: 기존 완성된 Week1 모듈들을 app_v1.7과 연결

```python
# modules/quiz_handler.py (357줄, 완전 검증됨)
# modules/stats_handler.py (460줄, 완전 검증됨) 
# modules/data_converter.py (271줄, 완전 검증됨)
```

**작업 내용**:
- app_v1.7.py에서 Week1 모듈들 import 및 연동
- 789개 문제 데이터 완전 활용
- 기존 퀴즈 로직을 새로운 라우트 구조에 적용

**완료 조건**:
- ✅ 기본학습 페이지에서 실제 문제 표시
- ✅ 대분류학습 페이지에서 카테고리별 문제 로드
- ✅ 정답/오답 처리 정상 작동

### **Priority 1-B: 조대표님 핵심 통계 3개 박스 구현 (2일)**
**목표**: 대문 화면 3개 통계 박스 실시간 데이터 연동

**1. 보유문제수 현황**
```javascript
// data/ins_master_db.csv 실시간 분석
function calculateQuestionCounts() {
    const csvData = loadCSVData();
    return {
        total: csvData.length,
        인스교재: csvData.filter(row => row.SOURCE?.includes('인스교재')).length,
        중개사시험: csvData.filter(row => row.SOURCE?.includes('중개사시험')).length
    };
}
```

**2. 학습진도 현황**
```javascript
// 사용자 등록일 기준 진도 계산
function calculateProgress(userId) {
    const userStats = getUserStatistics(userId);
    const totalQuestions = 1370;
    
    return {
        completedQuestions: userStats.attempted,
        progressRate: (userStats.attempted / totalQuestions) * 100,
        accuracy: (userStats.correct / userStats.attempted) * 100
    };
}
```

**3. 금일 학습현황**
```javascript
// 당일 전용 통계
function getTodayStatistics(userId) {
    const today = new Date().toISOString().split('T')[0];
    return getUserDailyStats(userId, today);
}
```

**완료 조건**:
- ✅ 대문 접속 시 3개 박스 실시간 데이터 표시
- ✅ 문제 풀이 시 즉시 통계 업데이트
- ✅ 조대표님 정보와 함께 정확한 수치 표시

---

## 🎯 **2순위: 핵심 기능 구현 (리팩토링 +3일 후)**

### **Priority 2-A: 시험 기준 점수 예측 시스템 (2일)**
**목표**: 조대표님 요구사항 7번 "실시간 합격 예측 시스템"

```javascript
class ExamScorePredictor {
    calculateSubjectScore(userId, subject) {
        const subjectStats = this.getSubjectStatistics(userId, subject);
        const accuracy = subjectStats.correct / subjectStats.attempted;
        return Math.round(accuracy * 100); // 정답률을 100점 기준으로 환산
    }
    
    predictPassLikelihood(userId) {
        const subjects = ['재산보험', '특종보험', '배상책임보험', '해상보험'];
        const subjectScores = subjects.map(s => this.calculateSubjectScore(userId, s));
        const average = subjectScores.reduce((a, b) => a + b) / subjectScores.length;
        
        // 합격 기준: 각 과목 40점 이상 + 전체 평균 60점 이상
        const subjectPass = subjectScores.every(score => score >= 40);
        const overallPass = average >= 60;
        
        return {
            subjectScores: subjectScores,
            overallAverage: Math.round(average),
            passLikelihood: subjectPass && overallPass ? 0.85 : 0.3,
            recommendation: this.generateRecommendation(subjectScores, average)
        };
    }
}
```

**완료 조건**:
- ✅ 실시간 시험 점수 환산 (정답률 → 100점 기준)
- ✅ 과목별 40점/전체 60점 합격 기준 적용
- ✅ 합격 가능성 실시간 표시
- ✅ 부족한 과목 및 필요 점수 안내

### **Priority 2-B: 모드별 상세 통계 (2일)**
**목표**: 조대표님 요구사항 4-6번 구현

**기본학습 통계 (이어풀기/처음풀기/랜덤풀기)**
```javascript
// 누적현황 vs 금일현황 2줄 구조
function updateBasicLearningStats(userId) {
    const cumulative = getCumulativeStats(userId, 'basic');
    const today = getTodayStats(userId, 'basic');
    
    document.getElementById('basic-cumulative').innerHTML = 
        `누적: ${cumulative.attempted}문제 | 정답: ${cumulative.correct}개 | 정답률: ${cumulative.accuracy}%`;
    document.getElementById('basic-today').innerHTML = 
        `금일: ${today.attempted}문제 | 정답: ${today.correct}개 | 정답률: ${today.accuracy}%`;
}
```

**대분류학습 통계**
```javascript
// 전체 통계 (상단 제목 우측) + 카테고리별 상세
function updateCategoryStats(userId, selectedCategory) {
    // 전체 대분류학습 통계 (상단)
    const overallStats = getCumulativeStats(userId, 'category');
    document.getElementById('category-overall').innerHTML = 
        `전체: ${overallStats.attempted}문제 | 정답률: ${overallStats.accuracy}%`;
    
    // 선택된 카테고리 상세 통계
    if (selectedCategory) {
        const categoryStats = getCategoryStats(userId, selectedCategory);
        displayCategoryDetailStats(selectedCategory, categoryStats);
    }
}
```

**완료 조건**:
- ✅ 기본학습 모든 모드에서 누적/금일 구분 표시
- ✅ 대분류학습 상단 전체 통계 표시
- ✅ 각 카테고리 클릭 시 상세 통계 표시

---

## 🚀 **3순위: 사용자 시스템 (리팩토링 +5일 후)**

### **Priority 3-A: 다중 사용자 기본 지원 (2일)**
**목표**: 조대표님 요구사항 8번 "사용자 등록 기반 데이터 수집"

```javascript
class MultiUserManager {
    registerUser(userName, phone, examDate) {
        const userId = this.generateUserId(userName, phone);
        const registrationTime = new Date().toISOString();
        
        // 사용자 등록 = 모든 통계의 절대 시작점
        const userProfile = {
            userId: userId,
            userName: userName,
            phone: phone,
            examDate: examDate,
            registeredAt: registrationTime, // 절대 기준점
            statistics: this.createInitialStatistics()
        };
        
        this.saveUserData(userId, userProfile);
        return userId;
    }
    
    getUserStatistics(userId) {
        const userData = this.loadUserData(userId);
        return userData ? userData.statistics : this.createDefaultStatistics();
    }
}
```

**완료 조건**:
- ✅ 사용자 등록 시점부터 모든 데이터 수집 시작
- ✅ 사용자별 독립적 통계 관리
- ✅ 10명 동시 접속 지원

### **Priority 3-B: 기본 크로스 플랫폼 동기화 (1일)**
**목표**: 모든 기기에서 동일한 통계 표시

```javascript
class BasicSyncManager {
    onLearningAction(userId, actionData) {
        // 로컬 업데이트
        this.updateLocalStatistics(userId, actionData);
        
        // 기본 동기화 (LocalStorage + 간단한 클라우드)
        this.syncToCloud(userId, actionData);
        
        // UI 새로고침
        this.refreshAllStatistics(userId);
    }
}
```

**완료 조건**:
- ✅ 어떤 기기에서든 학습 시 즉시 반영
- ✅ 브라우저 재시작 후에도 데이터 보존

---

## 📅 **전체 개발 일정 (리팩토링 완료 후)**

### **Week 1: 핵심 기능 구현**
```
Day 1: Week1 모듈 통합 + 실제 퀴즈 연동
Day 2-3: 조대표님 3개 통계 박스 구현
Day 4-5: 시험 기준 점수 예측 시스템
Day 6-7: 모드별 상세 통계 (기본학습 + 대분류학습)
```

### **Week 2: 사용자 시스템 + 완성**
```
Day 8-9: 다중 사용자 시스템
Day 10: 기본 크로스 플랫폼 동기화
Day 11-12: 전체 통합 테스트 + 최적화
Day 13-14: 조대표님 검수 + 완성
```

---

## 🎯 **우선순위 결정 기준**

### **1순위 선정 이유**
- **즉시 가치 창출**: Week1 모듈 활용으로 빠른 성과
- **조대표님 체감**: 대문 3개 박스로 즉시 확인 가능
- **기술적 안정성**: 검증된 모듈들 활용

### **2순위 선정 이유**  
- **차별화 핵심**: 시험 기준 점수 예측 (경쟁사 대비 우위)
- **사용자 만족**: 상세 통계로 학습 동기 증진
- **비즈니스 가치**: 고급 기능으로 유료 전환 가능

### **3순위 선정 이유**
- **확장성 기반**: 다중 사용자로 서비스 확장 준비
- **기술적 완성도**: 동기화로 완전한 플랫폼 구현
- **상용화 준비**: 실제 서비스 런칭 기반

---

## 🚨 **리스크 관리**

### **각 우선순위별 리스크**

**1순위 리스크 (낮음)**
- Week1 모듈들이 이미 검증됨
- 기존 HTML 구조 활용 가능
- 롤백 경로 명확 (app_v1.6으로 복귀)

**2순위 리스크 (중간)**
- 점수 예측 알고리즘 복잡성
- 실시간 계산 성능 이슈 가능
- 대응: 단계별 구현 + 성능 테스트

**3순위 리스크 (높음)**
- 다중 사용자 동시성 이슈
- 동기화 데이터 일관성 문제
- 대응: 기본 수준으로 제한 + Week3에서 고도화

---

## 🏆 **최종 성공 기준**

### **1순위 완료 시**
- ✅ 실제 789개 문제로 퀴즈 풀이 가능
- ✅ 대문 3개 박스 실시간 통계 표시
- ✅ 조대표님이 즉시 사용 가능한 수준

### **2순위 완료 시**  
- ✅ 시험 기준 정확한 점수 예측
- ✅ 모든 학습 모드에서 상세 통계
- ✅ 경쟁사 대비 차별화된 기능

### **3순위 완료 시**
- ✅ 다중 사용자 서비스 준비 완료
- ✅ 모든 기기에서 일관된 경험
- ✅ 상용 서비스 런칭 기반 완성

---

## 📞 **조대표님 확인 요청**

### **우선순위 승인**
- [ ] **1순위**: Week1 모듈 통합 + 3개 통계 박스 (즉시 착수)
- [ ] **2순위**: 점수 예측 + 상세 통계 (핵심 차별화)  
- [ ] **3순위**: 다중 사용자 + 동기화 (서비스 확장)

### **일정 승인**
- [ ] **Week 1**: 핵심 기능 구현 (7일)
- [ ] **Week 2**: 사용자 시스템 + 완성 (7일)
- [ ] **전체**: 리팩토링 완료 후 14일

### **리소스 배분**
- [ ] **노팀장**: 핵심 통계 로직 개발
- [ ] **서대리**: UI 연동 + 테스트
- [ ] **조대표님**: 중간 검수 + 최종 승인

**조대표님, 이 우선순위와 일정으로 진행해도 될까요?**